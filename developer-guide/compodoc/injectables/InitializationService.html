<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>@atlasmap/atlasmap-data-mapper documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	      <link rel="stylesheet" href="../styles/style.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">@atlasmap/atlasmap-data-mapper documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content injectable">
                   <div class="content-data">







<ol class="breadcrumb">
  <li>Injectables</li>
  <li>InitializationService</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="active">
            <a href="#info" role="tab" id="info-tab" data-toggle="tab" data-link="info">Info</a>
        </li>
        <li >
            <a href="#source" role="tab" id="source-tab" data-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="c-info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/app/lib/atlasmap-data-mapper/services/initialization.service.ts</code>
        </p>




            <section>
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>
                <tr>
                    <td class="col-md-4">
                        <h6><b>Properties</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                <a href="#cfg">cfg</a>
                            </li>
                            <li>
                                <a href="#initializationStatusChanged$">initializationStatusChanged$</a>
                            </li>
                            <li>
                                <a href="#initializationStatusChangedSource">initializationStatusChangedSource</a>
                            </li>
                            <li>
                                <a href="#systemInitialized$">systemInitialized$</a>
                            </li>
                            <li>
                                <a href="#systemInitializedSource">systemInitializedSource</a>
                            </li>
                        </ul>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                <a href="#addJavaDocument">addJavaDocument</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#addNonJavaDocument">addNonJavaDocument</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#fetchDocuments">fetchDocuments</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#fetchMappings">fetchMappings</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#handleError">handleError</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#initialize">initialize</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#initializeUserDoc">initializeUserDoc</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#processMappingsCatalogFiles">processMappingsCatalogFiles</a>
                            </li>
                            <li>
                                <a href="#processMappingsDocuments">processMappingsDocuments</a>
                            </li>
                            <li>
                                <a href="#resetConfig">resetConfig</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#updateCatalog">updateCatalog</a>
                            </li>
                            <li>
                                <a href="#updateLoadingStatus">updateLoadingStatus</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#updateMappings">updateMappings</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#updateStatus">updateStatus</a>
                            </li>
                        </ul>
                    </td>
                </tr>





        </tbody>
    </table>
</section>

            <section>
    <h3 id="constructor">Constructor</h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
<code>constructor(documentService: <a href="../injectables/DocumentManagementService.html">DocumentManagementService</a>, mappingService: <a href="../injectables/MappingManagementService.html">MappingManagementService</a>, errorService: <a href="../injectables/ErrorHandlerService.html">ErrorHandlerService</a>, fieldActionService: <a href="../injectables/FieldActionService.html">FieldActionService</a>, fileService: <a href="../injectables/FileManagementService.html">FileManagementService</a>, logger: NGXLogger)</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="44" class="link-to-prism">src/app/lib/atlasmap-data-mapper/services/initialization.service.ts:44</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                            <div>
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>documentService</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/DocumentManagementService.html" target="_self" >DocumentManagementService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>mappingService</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/MappingManagementService.html" target="_self" >MappingManagementService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>errorService</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/ErrorHandlerService.html" target="_self" >ErrorHandlerService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>fieldActionService</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/FieldActionService.html" target="_self" >FieldActionService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>fileService</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/FileManagementService.html" target="_self" >FileManagementService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>logger</td>
                                                  
                                                        <td>
                                                                    <code>NGXLogger</code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
</section>

            <section>
    
    <h3 id="methods">
        Methods
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="addJavaDocument"></a>
                    <span class="name">
                        <b>
                            addJavaDocument
                        </b>
                        <a href="#addJavaDocument"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>addJavaDocument(className: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, isSource: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank">boolean</a>, collectionType?: <a href="../undefineds/CollectionType.html">CollectionType</a>, collectionClassName?: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="412"
                            class="link-to-prism">src/app/lib/atlasmap-data-mapper/services/initialization.service.ts:412</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>className</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>isSource</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>collectionType</td>
                                    <td>
                                                <code><a href="../miscellaneous/enumerations.html#CollectionType" target="_self" >CollectionType</a></code>
                                    </td>

                                    <td>
                                        Yes
                                    </td>


                                </tr>
                                <tr>
                                    <td>collectionClassName</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        Yes
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../classes/DocumentDefinition.html" target="_self" >DocumentDefinition</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="addNonJavaDocument"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Private</span>
                            addNonJavaDocument
                        </b>
                        <a href="#addNonJavaDocument"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>addNonJavaDocument(name: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, documentType: <a href="../undefineds/DocumentType.html">DocumentType</a>, inspectionType: <a href="../undefineds/InspectionType.html">InspectionType</a>, inspectionSource: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, isSource: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank">boolean</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="425"
                            class="link-to-prism">src/app/lib/atlasmap-data-mapper/services/initialization.service.ts:425</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>name</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>documentType</td>
                                    <td>
                                                <code><a href="../miscellaneous/enumerations.html#DocumentType" target="_self" >DocumentType</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>inspectionType</td>
                                    <td>
                                                <code><a href="../miscellaneous/enumerations.html#InspectionType" target="_self" >InspectionType</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>inspectionSource</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>isSource</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../classes/DocumentDefinition.html" target="_self" >DocumentDefinition</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="fetchDocuments"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Private</span>
                            fetchDocuments
                        </b>
                        <a href="#fetchDocuments"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>fetchDocuments()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="437"
                            class="link-to-prism">src/app/lib/atlasmap-data-mapper/services/initialization.service.ts:437</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="fetchMappings"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Async</span>
                            fetchMappings
                        </b>
                        <a href="#fetchMappings"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>fetchMappings(mappingFiles: string[])</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="484"
                            class="link-to-prism">src/app/lib/atlasmap-data-mapper/services/initialization.service.ts:484</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Fetch mapping files and initialize user mappings in the canvas.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>mappingFiles</td>
                                    <td>
                                            <code>string[]</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Promise&lt;boolean&gt;</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="handleError"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Private</span>
                            handleError
                        </b>
                        <a href="#handleError"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>handleError(message: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, error: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="534"
                            class="link-to-prism">src/app/lib/atlasmap-data-mapper/services/initialization.service.ts:534</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>message</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>error</td>
                                    <td>
                                                <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="initialize"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Async</span>
                            initialize
                        </b>
                        <a href="#initialize"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>initialize()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="161"
                            class="link-to-prism">src/app/lib/atlasmap-data-mapper/services/initialization.service.ts:161</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Returns : </b>    <code>Promise&lt;boolean&gt;</code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="initializeUserDoc"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Async</span>
                            initializeUserDoc
                        </b>
                        <a href="#initializeUserDoc"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>initializeUserDoc(docBody: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>, docName: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, docType: <a href="../undefineds/DocumentType.html">DocumentType</a>, inspectionType: <a href="../undefineds/InspectionType.html">InspectionType</a>, isSource: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank">boolean</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="84"
                            class="link-to-prism">src/app/lib/atlasmap-data-mapper/services/initialization.service.ts:84</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Initialize a user-import schema or schema-instance document.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>docBody</td>
                                    <td>
                                                <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>docName</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>docType</td>
                                    <td>
                                                <code><a href="../miscellaneous/enumerations.html#DocumentType" target="_self" >DocumentType</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>inspectionType</td>
                                    <td>
                                                <code><a href="../miscellaneous/enumerations.html#InspectionType" target="_self" >InspectionType</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>isSource</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="processMappingsCatalogFiles"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Async</span>
                            processMappingsCatalogFiles
                        </b>
                        <a href="#processMappingsCatalogFiles"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>processMappingsCatalogFiles(compressedCatalog: Uint8Array)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="364"
                            class="link-to-prism">src/app/lib/atlasmap-data-mapper/services/initialization.service.ts:364</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>The compressed binary content (gzip) from either an imported ADM catalog file or from
the DM runtime catalog is presented to update the canvas.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>compressedCatalog</td>
                                    <td>
                                            <code>Uint8Array</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <ul>
<li>gzip binary buffer</li>
</ul>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Promise&lt;boolean&gt;</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="processMappingsDocuments"></a>
                    <span class="name">
                        <b>
                            processMappingsDocuments
                        </b>
                        <a href="#processMappingsDocuments"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>processMappingsDocuments(mappingsSchemaAggregate: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="276"
                            class="link-to-prism">src/app/lib/atlasmap-data-mapper/services/initialization.service.ts:276</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>mappingsSchemaAggregate</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="resetConfig"></a>
                    <span class="name">
                        <b>
                            resetConfig
                        </b>
                        <a href="#resetConfig"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>resetConfig()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="58"
                            class="link-to-prism">src/app/lib/atlasmap-data-mapper/services/initialization.service.ts:58</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="updateCatalog"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Async</span>
                            updateCatalog
                        </b>
                        <a href="#updateCatalog"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>updateCatalog(compressedCatalog: Uint8Array)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="337"
                            class="link-to-prism">src/app/lib/atlasmap-data-mapper/services/initialization.service.ts:337</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Update the GZIP catalog file in the runtime service.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>compressedCatalog</td>
                                    <td>
                                            <code>Uint8Array</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Promise&lt;boolean&gt;</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="updateLoadingStatus"></a>
                    <span class="name">
                        <b>
                            updateLoadingStatus
                        </b>
                        <a href="#updateLoadingStatus"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>updateLoadingStatus(status: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="543"
                            class="link-to-prism">src/app/lib/atlasmap-data-mapper/services/initialization.service.ts:543</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>status</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="updateMappings"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Async</span>
                            updateMappings
                        </b>
                        <a href="#updateMappings"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>updateMappings(mInfo: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="308"
                            class="link-to-prism">src/app/lib/atlasmap-data-mapper/services/initialization.service.ts:308</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Update .../target/mappings/atlasmapping-UI.nnnnnn.json in the runtime service.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>mInfo</td>
                                    <td>
                                                <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>Promise&lt;boolean&gt;</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="updateStatus"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Private</span>
                            updateStatus
                        </b>
                        <a href="#updateStatus"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>updateStatus()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="506"
                            class="link-to-prism">src/app/lib/atlasmap-data-mapper/services/initialization.service.ts:506</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</section>
            <section>
    
        <h3 id="inputs">
            Properties
        </h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="cfg"></a>
                        <span class="name">
                            <b>
                            cfg</b>
                            <a href="#cfg"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>        <code><a href="../classes/ConfigModel.html" target="_self" >ConfigModel</a></code>

                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>ConfigModel.getConfig()</code>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="38" class="link-to-prism">src/app/lib/atlasmap-data-mapper/services/initialization.service.ts:38</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="initializationStatusChanged$"></a>
                        <span class="name">
                            <b>
                            initializationStatusChanged$</b>
                            <a href="#initializationStatusChanged$"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code>Observable&lt;void&gt;</code>

                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>this.initializationStatusChangedSource.asObservable()</code>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="44" class="link-to-prism">src/app/lib/atlasmap-data-mapper/services/initialization.service.ts:44</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="initializationStatusChangedSource"></a>
                        <span class="name">
                            <b>
                            initializationStatusChangedSource</b>
                            <a href="#initializationStatusChangedSource"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>new Subject&lt;void&gt;()</code>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="43" class="link-to-prism">src/app/lib/atlasmap-data-mapper/services/initialization.service.ts:43</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="systemInitialized$"></a>
                        <span class="name">
                            <b>
                            systemInitialized$</b>
                            <a href="#systemInitialized$"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code>Observable&lt;void&gt;</code>

                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>this.systemInitializedSource.asObservable()</code>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="41" class="link-to-prism">src/app/lib/atlasmap-data-mapper/services/initialization.service.ts:41</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="systemInitializedSource"></a>
                        <span class="name">
                            <b>
                            systemInitializedSource</b>
                            <a href="#systemInitializedSource"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Default value : </i><code>new Subject&lt;void&gt;()</code>
                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="40" class="link-to-prism">src/app/lib/atlasmap-data-mapper/services/initialization.service.ts:40</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
</section>

    </div>


    <div class="tab-pane fade  tab-source-code" id="c-source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { Injectable } from &#x27;@angular/core&#x27;;
import { inflate } from &#x27;pako&#x27;;
import { Subject, Observable } from &#x27;rxjs&#x27;;
import { NGXLogger } from &#x27;ngx-logger&#x27;;

import { DocumentType, InspectionType, CollectionType } from &#x27;../common/config.types&#x27;;
import { DataMapperUtil } from &#x27;../common/data-mapper-util&#x27;;
import { DocumentInitializationModel, ConfigModel } from &#x27;../models/config.model&#x27;;
import { DocumentDefinition } from &#x27;../models/document-definition.model&#x27;;
import { MappingDefinition } from &#x27;../models/mapping-definition.model&#x27;;

import { ErrorHandlerService } from &#x27;./error-handler.service&#x27;;
import { DocumentManagementService } from &#x27;../services/document-management.service&#x27;;
import { MappingManagementService } from &#x27;../services/mapping-management.service&#x27;;
import { FieldActionService } from &#x27;./field-action.service&#x27;;
import { FileManagementService } from &#x27;./file-management.service&#x27;;
import { LookupTableUtil } from &#x27;../utils/lookup-table-util&#x27;;
import { MappingSerializer } from &#x27;../utils/mapping-serializer&#x27;;
import { MappingUtil } from &#x27;../utils/mapping-util&#x27;;

@Injectable()
export class InitializationService {
  cfg: ConfigModel &#x3D; ConfigModel.getConfig();

  systemInitializedSource &#x3D; new Subject&lt;void&gt;();
  systemInitialized$: Observable&lt;void&gt; &#x3D; this.systemInitializedSource.asObservable();

  initializationStatusChangedSource &#x3D; new Subject&lt;void&gt;();
  initializationStatusChanged$: Observable&lt;void&gt; &#x3D; this.initializationStatusChangedSource.asObservable();

  constructor(
    private documentService: DocumentManagementService,
    private mappingService: MappingManagementService,
    private errorService: ErrorHandlerService,
    private fieldActionService: FieldActionService,
    private fileService: FileManagementService,
    private logger: NGXLogger) {
    this.resetConfig();

    this.cfg.documentService.initialize();
  }

  resetConfig(): void {
    this.cfg &#x3D; new ConfigModel();
    this.cfg.documentService &#x3D; this.documentService;
    this.cfg.documentService.cfg &#x3D; this.cfg;
    this.cfg.mappingService &#x3D; this.mappingService;
    this.cfg.mappingService.cfg &#x3D; this.cfg;
    this.cfg.errorService &#x3D; this.errorService;
    this.cfg.fieldActionService &#x3D; this.fieldActionService;
    this.cfg.fieldActionService.cfg &#x3D; this.cfg;
    this.cfg.fileService &#x3D; this.fileService;
    this.cfg.fileService.cfg &#x3D; this.cfg;
    this.cfg.errorService.cfg &#x3D; this.cfg;
    this.cfg.initializationService &#x3D; this;
    this.cfg.logger &#x3D; this.logger;
    ConfigModel.setConfig(this.cfg);
  }

  /**
   * Initialize a user-import schema or schema-instance document.
   *
   * @param docBody
   * @param docName
   * @param docType
   * @param inspectionType
   * @param isSource
   */
  async initializeUserDoc(docBody: any, docName: string, docType: DocumentType, inspectionType: InspectionType, isSource: boolean) {
    let docdef: DocumentDefinition &#x3D; null;
    const javaArchive &#x3D; (docType &#x3D;&#x3D;&#x3D; DocumentType.JAVA_ARCHIVE);
    if (this.cfg.mappingService &#x3D;&#x3D; null) {
      this.cfg.errorService.warn(&#x27;Mapping service is not configured, validation service will not be used.&#x27;, null);
    } else if (this.cfg.initCfg.baseMappingServiceUrl &#x3D;&#x3D; null) {
      this.cfg.errorService.warn(&#x27;Mapping service URL is not configured, validation service will not be used.&#x27;, null);
    }

    // Clear out the existing document if importing the same name.
    if (docdef &#x3D; this.cfg.getDocForIdentifier(docName, isSource)) {
      if (isSource) {
        DataMapperUtil.removeItemFromArray(docdef, this.cfg.sourceDocs);
      } else {
        DataMapperUtil.removeItemFromArray(docdef, this.cfg.targetDocs);
      }
    }

    if (!javaArchive) {
      if (docType &#x3D;&#x3D;&#x3D; DocumentType.JAVA) {
        docdef &#x3D; this.addJavaDocument(docName, isSource);
      } else {
        docdef &#x3D; this.addNonJavaDocument(docName, docType, inspectionType, docBody, isSource);
      }
      docdef.name &#x3D; docName;
      docdef.updateFromMappings(this.cfg.mappings);
    }

    this.cfg.documentService.fetchClassPath().toPromise()
      .then((classPath: string) &#x3D;&gt; {
        this.cfg.initCfg.classPath &#x3D; classPath;

        // Push the user-defined java archive file to the runtime service.
        if (javaArchive) {
          this.cfg.documentService.setLibraryToService(docBody, async(success, res) &#x3D;&gt; {
            if (success) {
              await this.cfg.fieldActionService.fetchFieldActions()
              .catch((error: any) &#x3D;&gt; {
                this.handleError(error, null);
              });
            }
          });
        } else {
          this.logger.trace(&#x60;Fetching user document: name&#x3D;${docdef.name}, id&#x3D;${docdef.id},\
isSource&#x3D;${docdef.initModel.isSource}, inspection&#x3D;${docdef.initModel.inspectionType}&#x60;);
          this.cfg.documentService.fetchDocument(docdef, this.cfg.initCfg.classPath).toPromise()
          .then(async(doc: DocumentDefinition) &#x3D;&gt; {

            if (doc.fields.length &#x3D;&#x3D;&#x3D; 0) {
              if (isSource) {
                DataMapperUtil.removeItemFromArray(docdef, this.cfg.sourceDocs);
              } else {
                DataMapperUtil.removeItemFromArray(docdef, this.cfg.targetDocs);
              }
            }
            this.logger.trace(&#x60;Fetched user document: name&#x3D;${docdef.name}, id&#x3D;${docdef.id},\
isSource&#x3D;${docdef.initModel.isSource}, inspection&#x3D;${docdef.initModel.inspectionType}&#x60;);
            this.updateStatus();
          })
          .catch((error: any) &#x3D;&gt; {
            if (error.status &#x3D;&#x3D;&#x3D; 0) {
              this.handleError(&#x27;Unable to fetch document &#x27; + docName + &#x27; from the runtime service.&#x27;, error);
            } else {
              this.handleError(&#x27;Could not load document \&#x27;&#x27; + docdef.id + &#x27;\&#x27;: &#x27; + error.status + &#x27; &#x27; + error.statusText, error);
            }
          });
        }
      })
      .catch((error: any) &#x3D;&gt; {
        if (error.status &#x3D;&#x3D;&#x3D; 0) {
          this.handleError(&#x27;Fatal network error: Could not connect to AtlasMap design runtime service.&#x27;, error);
        } else {
          this.handleError(&#x27;Could not load Maven class path: &#x27; + error.status + &#x27; &#x27; + error.statusText, error);
        }
      });
  }

  async initialize(): Promise&lt;boolean&gt; {
    return new Promise&lt;boolean&gt;(async(resolve, reject) &#x3D;&gt; {
      this.cfg.errorService.clearMappingErrors();
      this.cfg.errorService.clearValidationErrors();
      this.cfg.fieldActionService.isInitialized &#x3D; false;
      this.cfg.initCfg.initialized &#x3D; false;
      this.cfg.initCfg.mappingInitialized &#x3D; false;

      if (this.cfg.mappingService &#x3D;&#x3D; null) {
        this.cfg.errorService.warn(&#x27;Mapping service is not configured, validation service will not be used.&#x27;, null);
      } else if (this.cfg.initCfg.baseMappingServiceUrl &#x3D;&#x3D; null) {
        this.cfg.errorService.warn(&#x27;Mapping service URL is not configured, validation service will not be used.&#x27;, null);
      }

      if (!this.cfg.fieldActionService) {
        this.handleError(&#x27;FieldActionService is not configured&#x27;, null);
        reject();
        return;
      }

      // Verify the runtime service is out there.
      try {
        if (!await this.cfg.mappingService.runtimeServiceActive()) {
          this.handleError(&#x27;The AtlasMap runtime service is not available.&#x27;, null);
          reject();
          return;
        }
      } catch (error) {
        this.handleError(&#x27;The AtlasMap runtime service is not available.&#x27;, null);
        reject(error);
        return;
      }

      // load documents
      if (!this.cfg.isClassPathResolutionNeeded()) {
        this.fetchDocuments();
      } else {
        this.updateLoadingStatus(&#x27;Loading Maven class path.&#x27;);
        // fetch class path
        this.cfg.documentService.fetchClassPath().toPromise()
          .then((classPath: string) &#x3D;&gt; {
            this.cfg.initCfg.classPath &#x3D; classPath;
            this.fetchDocuments();
            this.updateStatus();
          })
          .catch((error: any) &#x3D;&gt; {
            if (error.status &#x3D;&#x3D;&#x3D; 0) {
              this.handleError(&#x27;Fatal network error: Could not connect to AtlasMap design runtime service.&#x27;, error);
            } else {
              this.handleError(&#x27;Could not load Maven class path: &#x27; + error.status + &#x27; &#x27; + error.statusText, error);
            }
            reject(error);
          });
      }

      // Fetch adm-catalog-files.gz if it exists.
      this.cfg.fileService.getCurrentMappingCatalog().subscribe( async(catalog: Uint8Array) &#x3D;&gt; {

        // If catalog is null then no compressed mappings catalog is available on the server.
        if (catalog &#x3D;&#x3D;&#x3D; null) {
          if (this.cfg.mappings &#x3D;&#x3D;&#x3D; null) {
            this.cfg.mappings &#x3D; new MappingDefinition();
          }

          // load field actions - do this even with no documents so the default field actions are loaded.
          await this.cfg.fieldActionService.fetchFieldActions()
          .catch((error: any) &#x3D;&gt; {
            this.handleError(&#x27;Failure to load field actions on initialization.&#x27;, error);
            reject(error);
            return;
          });
          this.updateStatus();
          resolve(true);
          return;
        }

        await this.processMappingsCatalogFiles(catalog);

        // load both default and custom field actions
        await this.cfg.fieldActionService.fetchFieldActions()
        .catch((error: any) &#x3D;&gt; {
          this.handleError(&#x27;Failure to load field actions on initialization.&#x27;, error);
          reject(error);
          return;
        });

        // load mappings
        if (this.cfg.mappings &#x3D;&#x3D; null) {
          this.cfg.mappings &#x3D; new MappingDefinition();
          if (this.cfg.mappingFiles.length &gt; 0) {
            await this.fetchMappings(this.cfg.mappingFiles);
          } else {
            this.cfg.fileService.findMappingFiles(&#x27;UI&#x27;).toPromise()
              .then( async(files: string[]) &#x3D;&gt; {
                // It&#x27;s okay if no mapping files are found - resolve false so the caller will know.
                if (!await this.fetchMappings(files)) {
                  resolve(false);
                }
              },
              (error: any) &#x3D;&gt; {
                if (error.status &#x3D;&#x3D;&#x3D; 0) {
                  this.handleError(&#x27;Fatal network error: Could not connect to AtlasMap design runtime service.&#x27;, error);
                  reject(error);
                }
              }
            );
          }
        }
        this.updateStatus();
        resolve(true);
      });
      resolve(true);
    });
  }

  processMappingsDocuments(mappingsSchemaAggregate: string): any {
    let mInfo: any &#x3D; null;
    try {
      mInfo &#x3D; DocumentManagementService.getMappingsInfo(mappingsSchemaAggregate);
    } catch (error) {
      this.cfg.errorService.mappingError(&#x27;Unable to process mapping information from the data mappings file. &#x27; +
        &#x27;\n&#x27; + error.message, error);
      return null;
    }

    this.cfg.errorService.clearValidationErrors();

    let metaFragment: any &#x3D; null;
    let fragData &#x3D; &#x27;&#x27;;
    let fragIndex &#x3D; 0;

    // Reinitialize the model documents.
    for (metaFragment of mInfo.exportMeta) {
      fragData &#x3D; mInfo.exportBlockData[fragIndex].value;
      this.initializeUserDoc(fragData, metaFragment.name, metaFragment.documentType,
        metaFragment.inspectionType, (metaFragment.isSource &#x3D;&#x3D;&#x3D; &#x27;true&#x27;));
      fragIndex++;
    }
    this.cfg.mappingService.notifyMappingUpdated();
    return mInfo;
  }

  /**
   * Update .../target/mappings/atlasmapping-UI.nnnnnn.json in the runtime service.
   *
   * @param mInfo
   */
  async updateMappings(mInfo: any): Promise&lt;boolean&gt; {
    return new Promise&lt;boolean&gt;((resolve, reject) &#x3D;&gt; {
      try {
        this.cfg.fileService.setMappingToService(mInfo.exportMappings.value).toPromise()
          .then(async(result: boolean) &#x3D;&gt; {
            resolve(true);
        }).catch((error: any) &#x3D;&gt; {
          if (error.status &#x3D;&#x3D;&#x3D; 0) {
            this.cfg.errorService.mappingError(
              &#x27;Fatal network error: Unable to connect to the AtlasMap design runtime service.&#x27;, error);
          } else {
            this.cfg.errorService.mappingError(
              &#x27;Unable to update the mappings file to the AtlasMap design runtime service.  &#x27; +
                 error.status + &#x27; &#x27; + error.statusText, error);
          }
          reject(error);
        });
      } catch (error) {
        this.cfg.errorService.mappingError(&#x27;Unable to decompress the aggregate mappings catalog buffer.\n&#x27;, error);
        reject(error);
      }
    });
  }

  /**
   * Update the GZIP catalog file in the runtime service.
   *
   * @param compressedCatalog
   */
  async updateCatalog(compressedCatalog: Uint8Array): Promise&lt;boolean&gt; {
    return new Promise&lt;boolean&gt;((resolve, reject) &#x3D;&gt; {
      // Update .../target/mappings/adm-catalog-files.gz
      const fileContent: Blob &#x3D; new Blob([compressedCatalog], {type: &#x27;application/octet-stream&#x27;});
      this.cfg.fileService.setBinaryFileToService(fileContent, this.cfg.initCfg.baseMappingServiceUrl + &#x27;mapping/GZ/0&#x27;).toPromise()
        .then(async(result: boolean) &#x3D;&gt; {
        resolve(true);
      }).catch((error: any) &#x3D;&gt; {
        if (error.status &#x3D;&#x3D;&#x3D; 0) {
          this.cfg.errorService.mappingError(
            &#x27;Fatal network error: Unable to connect to the AtlasMap design runtime service.&#x27;, error);
        } else {
          this.cfg.errorService.mappingError(
            &#x27;Unable to update the catalog mappings file to the AtlasMap design runtime service.  &#x27; +
              error.status + &#x27; &#x27; + error.statusText, error);
          resolve(false);
        }
      });
    });
  }

  /**
   * The compressed binary content (gzip) from either an imported ADM catalog file or from
   * the DM runtime catalog is presented to update the canvas.
   *
   * @param compressedCatalog - gzip binary buffer
   */
  async processMappingsCatalogFiles(compressedCatalog: Uint8Array): Promise&lt;boolean&gt; {
    return new Promise&lt;boolean&gt;(async(resolve, reject) &#x3D;&gt; {
      try {

        // Inflate the compressed content.
        const decompress &#x3D; inflate(compressedCatalog);
        const mappingsDocuments &#x3D;
          new Uint8Array(decompress).reduce((data, byte) &#x3D;&gt; data + String.fromCharCode(byte), &#x27;&#x27;);
        const mInfo &#x3D; this.processMappingsDocuments(mappingsDocuments);

        // Reinitialize the model mappings.
        if (mInfo &amp;&amp; mInfo.exportMappings) {
          const catalogMappingsName &#x3D; MappingSerializer.deserializeAtlasMappingName(
            DocumentManagementService.getMappingsInfo(mInfo.exportMappings.value));

            // If the live UI mappings name does not match the UI mappings name extracted from the
            // catalog file then use the mappings from the catalog file.  Otherwise use the live
            // UI file.
            this.cfg.fileService.findMappingFiles(&#x27;UI&#x27;).toPromise()
              .then( async(files: string[]) &#x3D;&gt; {

              await this.updateCatalog(compressedCatalog);
              await this.cfg.fieldActionService.fetchFieldActions()
              .catch((error: any) &#x3D;&gt; {
                this.handleError(&#x27;Failure to load field actions.&#x27;, error);
              });
              if (catalogMappingsName !&#x3D;&#x3D; files[0]) {
                await this.updateMappings(mInfo);
              }
              resolve(true);
            },
            (error: any) &#x3D;&gt; {
              if (error.status &#x3D;&#x3D;&#x3D; 0) {
                this.handleError(&#x27;Fatal network error: Could not connect to AtlasMap design runtime service.&#x27;, error);
              }
              reject(error);
            }
          );
        } else {
          resolve(true);
        }
      } catch (error) {
        this.cfg.errorService.mappingError(&#x27;Unable to decompress the aggregate mappings catalog buffer.\n&#x27;, error);
        reject(error);
      }
    });
  }

  addJavaDocument(className: string, isSource: boolean,
    collectionType?: CollectionType, collectionClassName?: string): DocumentDefinition {
    const model: DocumentInitializationModel &#x3D; new DocumentInitializationModel();
    model.id &#x3D; className;
    model.type &#x3D; DocumentType.JAVA;
    model.inspectionType &#x3D; InspectionType.JAVA_CLASS;
    model.inspectionSource &#x3D; className;
    model.isSource &#x3D; isSource;
    model.collectionType &#x3D; collectionType;
    model.collectionClassName &#x3D; collectionClassName;
    return this.cfg.addDocument(model);
  }

  private addNonJavaDocument(
    name: string, documentType: DocumentType, inspectionType: InspectionType,
    inspectionSource: string, isSource: boolean): DocumentDefinition {
    const model: DocumentInitializationModel &#x3D; new DocumentInitializationModel();
    model.id &#x3D; name;
    model.type &#x3D; documentType;
    model.inspectionType &#x3D; inspectionType;
    model.inspectionSource &#x3D; inspectionSource;
    model.isSource &#x3D; isSource;
    return this.cfg.addDocument(model);
  }

  private fetchDocuments(): void {
    this.updateLoadingStatus(&#x27;Loading source/target documents.&#x27;);
    for (const docDef of this.cfg.getAllDocs()) {
      if (docDef &#x3D;&#x3D;&#x3D; this.cfg.propertyDoc || docDef &#x3D;&#x3D;&#x3D; this.cfg.constantDoc) {
        docDef.initialized &#x3D; true;
        continue;
      }

      const docName: string &#x3D; docDef.name;

      if (docDef.type &#x3D;&#x3D;&#x3D; DocumentType.JAVA_ARCHIVE &amp;&amp; this.cfg.initCfg.baseJavaInspectionServiceUrl &#x3D;&#x3D; null) {
        this.cfg.errorService.warn(&#x27;Java inspection service is not configured. Document will not be loaded: &#x27; + docName, docDef);
        docDef.initialized &#x3D; true;
        this.updateStatus();
        continue;
      } else if (docDef.type &#x3D;&#x3D;&#x3D; DocumentType.XML &amp;&amp; this.cfg.initCfg.baseXMLInspectionServiceUrl &#x3D;&#x3D; null) {
        this.cfg.errorService.warn(&#x27;XML inspection service is not configured. Document will not be loaded: &#x27; + docName, docDef);
        docDef.initialized &#x3D; true;
        this.updateStatus();
        continue;
      } else if (docDef.type &#x3D;&#x3D;&#x3D; DocumentType.JSON &amp;&amp; this.cfg.initCfg.baseJSONInspectionServiceUrl &#x3D;&#x3D; null) {
        this.cfg.errorService.warn(&#x27;JSON inspection service is not configured. Document will not be loaded: &#x27; + docName, docDef);
        docDef.initialized &#x3D; true;
        this.updateStatus();
        continue;
      }

      this.cfg.documentService.fetchDocument(docDef, this.cfg.initCfg.classPath).toPromise()
        .then((doc: DocumentDefinition) &#x3D;&gt; {
          this.updateStatus();
        })
        .catch((error: any) &#x3D;&gt; {
          if (error.status &#x3D;&#x3D;&#x3D; 0) {
            this.handleError(&#x27;Fatal network error: Could not connect to AtlasMap design runtime service.&#x27;, error);
          } else {
            const errDetail &#x3D; error.status ? error.status + &#x27;:&#x27; + error.statusText : error.toString();
            this.handleError(&#x60;Could not load Document \&#x27;${docDef.name}\&#x27;(${docDef.id}): ${errDetail}&#x60;, error);
          }
        });
    }
  }

  /**
   * Fetch mapping files and initialize user mappings in the canvas.
   *
   * @param mappingFiles
   */
  async fetchMappings(mappingFiles: string[]): Promise&lt;boolean&gt; {
    return new Promise&lt;boolean&gt;((resolve, reject) &#x3D;&gt; {
      if (mappingFiles &#x3D;&#x3D; null || mappingFiles.length &#x3D;&#x3D;&#x3D; 0) {
        resolve(false);
      }

      this.cfg.mappingService.fetchMappings(mappingFiles, this.cfg.mappings).toPromise()
        .then((result: boolean) &#x3D;&gt; {
        this.cfg.initCfg.mappingInitialized &#x3D; true;
        this.updateStatus();
        this.cfg.mappingService.notifyMappingUpdated().then(() &#x3D;&gt; resolve(true));
      }).catch((error: any) &#x3D;&gt; {
        if (error.status &#x3D;&#x3D;&#x3D; 0) {
          this.handleError(&#x27;Fatal network error: Could not connect to AtlasMap design runtime service.&#x27;, error);
        } else {
          this.handleError(&#x27;Could not load mapping definitions.&#x27;, error);
        }
        reject(error);
      });
    });
  }

  private updateStatus(): void {
    const documentCount: number &#x3D; this.cfg.getAllDocs().length;
    let finishedDocCount &#x3D; 0;
    for (const docDef of this.cfg.getAllDocs()) {
      if (docDef.initialized || docDef.errorOccurred) {
        finishedDocCount++;
      }
    }

    if ((documentCount &#x3D;&#x3D;&#x3D; finishedDocCount) &amp;&amp; this.cfg.fieldActionService.isInitialized) {
      if (this.cfg.preloadedMappingJson) {
        MappingSerializer.deserializeMappingServiceJSON(JSON.parse(this.cfg.preloadedMappingJson), this.cfg);
      }
      if (this.cfg.mappings) {
        LookupTableUtil.updateLookupTables(this.cfg.mappings);
        MappingUtil.updateDocumentNamespacesFromMappings(this.cfg);
        MappingUtil.updateMappingsFromDocuments(this.cfg);
        for (const d of this.cfg.getAllDocs()) {
          d.updateFromMappings(this.cfg.mappings);
        }
        MappingUtil.removeStaleMappings(this.cfg);
      }
      this.updateLoadingStatus(&#x27;Initialization complete.&#x27;);
      this.cfg.initCfg.initialized &#x3D; true;
      this.systemInitializedSource.next();
    }
  }

  private handleError(message: string, error: any) {
    message &#x3D; &#x27;Data Mapper UI Initialization Error: &#x27; + message;
    this.cfg.errorService.error(message, error);
    this.updateLoadingStatus(message);
    this.cfg.initCfg.initializationErrorOccurred &#x3D; true;
    this.cfg.initCfg.initialized &#x3D; true;
    this.systemInitializedSource.next();
  }

  updateLoadingStatus(status: string): void {
    this.cfg.initCfg.loadingStatus &#x3D; status;
    this.initializationStatusChangedSource.next();
  }

}
</code></pre>
    </div>

</div>







                   




                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> result-matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'injectable';
            var COMPODOC_CURRENT_PAGE_URL = 'InitializationService.html';
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>
       <!-- Required to polyfill modern browsers as code is ES5 for IE... -->
       <script src="../js/libs/custom-elements-es5-adapter.js" charset="utf-8" defer></script>
       <script src="../js/menu-wc.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
